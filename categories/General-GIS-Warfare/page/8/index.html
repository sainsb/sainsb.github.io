<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 8 | General GIS Warfare | </title>
  <meta name="author" content="Che Geovara">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="null"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="null" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <img src='//sainsb.github.io/blog_logo.png' style='margin:15px;'/>
  <h2 class="subtitle"></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="http://sainsb.github.io">Home</a></li>
    
      <li><a href="http://sainsb.github.io/archives">Archives</a></li>
    
      <li><a href="http://sainsb.github.io/about">About</a></li>
    
      <li><a href="http://sainsb.github.io/atom.xml">RSS</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title category">General GIS Warfare</h2>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-10-05T06:15:00.000Z"><a href="/2010/10/04/survey-summary-from-external-app-needs-assessment/">Oct 4 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/10/04/survey-summary-from-external-app-needs-assessment/">Survey Summary from External App. Needs Assessment</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Before embarking on the redesign of Yavapai County’s external GIS app, we added a survey button to the ArcIMS app and asked a series of questions to target our audience and understand needs…It sure was useful for shutting up certain complainers after the fact (who of course didn’t take part)<br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/10/Survey_Summary.pdf" target="_blank" rel="external">Survey_Summary</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-08-20T08:41:00.000Z"><a href="/2010/08/20/batch-grid-control-in-arctoolbox/">Aug 20 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/08/20/batch-grid-control-in-arctoolbox/">Batch grid control in ArcToolbox</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I guess it pays to read the instructions…When I saw the option for ‘Batch…’ under ArcToolbox items at 9.2(?), I was initially excited but then became quickly frustrated when certain ‘constant’ values seemed to require laborious copying and pasting.&nbsp; Enter the Fill tool. Right click a cell with the value you want to propagate to those below and click ‘fill’. Good Times.<br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/12345.bmp" target="_blank" rel="external"><img src="/images/eddf8437283a192f6d2a266b56f18c9958eff1ea.bmp" alt="" title="12345"></a><br>Edit: You can also drag and drop into grid cells.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-08-20T01:30:00.000Z"><a href="/2010/08/19/remote-desktop-span/">Aug 19 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/08/19/remote-desktop-span/">Remote desktop span</a></h1>
  

    </header>
    <div class="entry">
      
        <p>The ability to span multiple desktops in a remote session really isn’t all that useful unless you have a box that you uh…would need to do that on…(?smack face).&nbsp; Our prod GIS box is just such a box, where having a code window on one monitor and the ArcMap interface proves highly useful.</p>
<p>A feature that was apparently introduced with Remote Desktop version 6 (Vista standard)(came with XP in a service pack) gives you the /span switch.</p>
<p>From the command line run ‘mstsc /span’ to get a full (dual screen) remote session.&nbsp; Sounds like there is support for multi-monitor setup at Win 7.</p>
<p>Several links to more on the topic.</p>
<p><a href="http://blog.tmcnet.com/blog/tom-keating/microsoft/remote-desktop-dual-monitor-support-tip.asp" target="_blank" rel="external">http://blog.tmcnet.com/blog/tom-keating/microsoft/remote-desktop-dual-monitor-support-tip.asp</a></p>
<p><a href="http://blogs.msdn.com/b/rds/archive/2006/11/10/multi-monitor-support-in-the-vista-ts-client.aspx" target="_blank" rel="external">http://blogs.msdn.com/b/rds/archive/2006/11/10/multi-monitor-support-in-the-vista-ts-client.aspx</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-08-11T01:12:00.000Z"><a href="/2010/08/10/flood-control/">Aug 10 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/08/10/flood-control/">Flood control</a></h1>
  

    </header>
    <div class="entry">
      
        <p>The new flood control data looks pretty good.&nbsp; I checked it for performance, density and size.<br><strong>Performance</strong><br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/2500.png" target="_blank" rel="external"><img src="/images/33c15fd0ed8fd26276d884fa2879a41b83640056.png" alt="" title="2500"></a><br><em><strong>1:2500 - 46 second draw time</strong></em><br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/20000.png" target="_blank" rel="external"><img src="/images/93afef282a665b430e208445731eea1192553e7d.png" alt="" title="20000"></a><br><em><strong>1:20,000 1 minute 7 second draw time.</strong></em><br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/35000.png" target="_blank" rel="external"><img src="/images/fd34c4128f977c1124900878f7eb17ac477cbc2a.png" alt="" title="35000"></a><br><em><strong>1:35,000 nearly 2 minute draw time.</strong></em><br>The 20 ft YC contours I recently created draw at less than a second at the above extents and scales.</p>
<h2 id="Density">Density</h2>
<p>In order to compare density I created a subset of both my 20 ft contours and the new 10 ft contours.&nbsp; Visually and as expected, one can see significantly more detail in the 10 ft contours.</p>
<p><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/Untitled.png" target="_blank" rel="external"><img src="/images/9575934e4995d33d8f1509dd476362a8ebb6e6d4.png" alt=""></a><br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/stats.bmp" target="_blank" rel="external"><img src="/images/72a9924ff33a89090269f421102c5595e58363fb.bmp" alt=""></a></p>
<p>As expected, the 10 ft contours are double in number for the sample area. However, rather than double the density(number of vertices), we see a <em><strong>1:8 ratio of vertices</strong></em>. This may indicate that the 10ft contours could be generalized without losing much detail.</p>
<h2 id="Size">Size</h2>
<p>Size of the new county-wide 20ft contours: 891 MB<br> Size of the new Flood Control 10ft contours: 2.1 GB</p>
<p>In order to test possible generalization of the data, I created a copy of the sample and generalized at a 1 ft max. allow. offset.</p>
<p><img src="/images/eaed5e4661f41370d3487ebf628d0437904489e7.png" alt=""><br>For a closer look (1:200) at what is happening here:</p><br><img src="/images/9eccc55b9849c8c0ee4f3851f15918198860096a.png" alt=""><br>Here is the breakdown of how these two samples compare in density:<br><img src="/images/a5a59df9701f2ee4cfbe17ed519edb39851943fa.png" alt=""><br><strong>Summary</strong><br>Resampling 30ft raster data (10M NED) down to 10ft contours is not, in my experience, an acceptable practice. However, if choosing to do so and performance in ArcMap is an issue I would recommend:<br>1) Generalizing the contours down to 1 ft Max. Allow. offset. (This will likely halve the size of the data with little detail lost (see above))<br>2) Intersecting/slicing contours up using an intersect with 100-200 tiles. (This will improve draw time significantly)<p></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-08-07T01:02:00.000Z"><a href="/2010/08/06/generalizing-polygons-2/">Aug 6 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/08/06/generalizing-polygons-2/">Generalizing polygons</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I was thinking of generalizing parcels for small-scales on the web-app to improve performance…guess not…</p>
<p><em>…This is taken from ET Geowizards regarding polygon generalization…just found it interesting</em></p>
<p><strong>Smoothing/Generalizing polygons. Why it is so difficult?</strong><br>In the Shapefiles and GeoDatabases (not in the coverages) each polygon has its own outline. This means that the common boundary between two adjacent polygons is represented by two coincident polylines. If we smooth/generalize these adjacent&nbsp; polygons each of the outlines will be smoothed/generalized&nbsp; separately and DIFFERENTLY. As a result we will get gaps and/or overlaps on the boundary. With other words we will end up with destroyed topology.<br>Further in this document all the examples and explanations will be based on the Smoothing, because the effect is more pronounced, but everything is applicable for the generalization process as well.</p>
<p><img src="/images/50d8dd437e5122169d42dd58184e2c8977a494ba.jpg" alt=""><img src="/images/3319855ca156bbc3a91d80e4062786f654330afc.jpg" alt=""></p>
<p>Original polygons vs polygons smoothed directly</p>
<p>The example above visualizes the gaps resulting from Smoothing the polygons directly.<br><strong>So, how to smooth polygons?</strong><br>Lets think a bit in the good old Coverage way, where all the geometries were stored as arcs and the polygons were build from these arcs (no duplicate geometry on the boundary of two adjacent polygons). If something was changed in the geometry of the Arcs it reflected in the polygons built from them. If we smooth/generalize an Arc, the two polygons in which this Arc participates will be smoothed/generalized EQUALLY.</p>
<p>Here is the ArcGIS procedure that emulates this behavior. All the functions are available in ET GeoWizards.<br>&bull;&nbsp;&nbsp;&nbsp; Convert the polygons to polylines (this just creates a polyline shapefile from the polygon boundaries). Polygon To Polyline function<br>&bull;&nbsp;&nbsp;&nbsp; Clean the polylines (this will create all intersections and remove the duplicate polylines on the boundaries between two adjacent polygons). Clean Polyline function<br>&bull;&nbsp;&nbsp;&nbsp; Smooth the polylines (there is no duplicate polylines, so no topological problems will be introduced). Smooth Polyline function<br>&bull;&nbsp;&nbsp;&nbsp; Build new polygons from smoothed polylines (this will give us smoothed&nbsp; topologically correct polygons). Build Polygons function</p>
<p>1. polygon to polyline</p>
<p><img src="/images/2ea2b928eaf3526f4d3817ab51984234d3ad0445.jpg" alt=""></p>
<p>2. Clean polylines</p>
<p><img src="/images/a6b2d8403eb7818d5cb14b0951229e695dac4616.jpg" alt=""></p>
<p>3. Smooth polylines (B-Spline method)</p>
<p><img src="/images/d3550a83ecc9e9221125493af6453c8d52f4b27c.jpg" alt=""></p>
<p>4. Build polygons</p>
<p><img src="/images/6f8140dc836dc39aed289d32ebae197f9c9bf816.jpg" alt=""></p>
<p><strong>How to restrict the Smoothing and remove the unnecessary vertices after smoothing?</strong><br>The  degree of smoothing can be controlled by the parameters used in the  Smooth function. In some cases however due to the lack of enough  vertices the parameters used can not restrict the smoothing too much. In  such cases, we can introduce new vertices to the cleaned polylines  (Densify function) before proceeding with smoothing. After smoothing we  can remove the unnecessary vertices before building the polygons.&nbsp;</p>
<p><a href="http://www.ian-ko.com/ET_GeoWizards/WhitePapers/gw_smooth_generalize.htm#Smoothing/Generalizing%20polygons.%20Why%20it%20is%20so%20difficult?" target="_blank" rel="external">more on this here.</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-08-03T08:36:00.000Z"><a href="/2010/08/03/gpx-conversion-tool-for-arc-2/">Aug 3 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/08/03/gpx-conversion-tool-for-arc-2/">GPX Conversion Tool for Arc</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I have converted a GPX VBA App I wrote some time ago to VB.NET and pushed it out to our Dev GIS server.&nbsp; It is called GPX Suite and is available under the customize commands. </p>
<p></p><p>GPX stands for GPS Exchange format - it is an XML-based standard to which every home-user mapping application worth it’s nickel should be able to export to.&nbsp; With the data interoperability extensions, ESRI recognizes the format similar to the way it recognizes coverages… without it, it doesn’t know GPX from Pac-Man.</p>
<p>The caveats with the tool are this: It is only intended for polylines and GPS tracks, it does not support waypoints nor routes.</p>
<p>The functionality goes something like this:</p>
<ol>
<li>Decide whether you want to import or export.</li>
<li>If importing, you may select to either load the selected GPX files into the first layer in the TOC (must be a shapefile), or have it create a new shapefile for you</li>
<li>You may select more than one GPX file in the ‘Open File(s)’ dialog.</li>
<li>You may change the output folder.</li>
<li>If exporting, you may select the layer in the TOC and it’s field for a name attribute for each track in the exported GPX</li>
<li>You may specify to only export selected features.</li>
<li>I didn’t build a lot of intelligence nor error catching into it as I felt I had better ways to spend my day, but I have supplied the source code in the above directory.<br><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/sdfsdf.bmp" target="_blank" rel="external"><img src="/images/a824688ac399c298f152432cd4c6e35c91f5baca.bmp" alt="" title="sdfsdf"></a></li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-08-03T08:21:00.000Z"><a href="/2010/08/03/arcgis-10-dev-frustrations/">Aug 3 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/08/03/arcgis-10-dev-frustrations/">ArcGIS 10 dev frustrations...</a></h1>
  

    </header>
    <div class="entry">
      
        <p>What started as an innocent mission to push some GPX tools I wrote some time ago out to our Dev GIS server turned into a horrible black hole when I discovered that yes, VBA is supported at 10 but it is a separate installation and requires some change/additions to the license.&nbsp; I guess because VBA is going away, ESRI has no choice…fair enough…This really sucks though for multiple reasons which I will of course outline here:</p>
<p>1) Debugging ArcObjects in the VBA/Macro editor in ArcMap is fast.&nbsp; You don’t have to fire up ArcMap each time you make a change to the code.</p>
<p>2) While I haven’t looked into it, there really doesn’t seem to be much support for GUI apps with python - I’m assuming it is more intended for models/geoprocessing etc.(?)</p>
<p>3) ESRI claims that building mods in Visual Studio is less complicated than in VBA - apparently they’ve never built a mod before because that is total BS.&nbsp; The com registration, form window handles, inheritance, references etc. make it far more complicated - at least if all you need is a simple gui form. I allow that a) VBA is not very sophisticated and b) mod deployment is easier.</p>
<p>Ok - well there’s three…</p>
<p>Terri found <a href="http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#//0001000000w2000000" target="_blank" rel="external">this link</a> for us the other day detailing ESRI’s new workflow for mod development in Visual Studio…looks harmless enough…if it works.</p>
<p><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/08/computer.gif" target="_blank" rel="external"><img src="/images/813d0b59f2604018dd91a70a4a9adb0ea1bd2bae.gif" alt="" title="computer"></a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-07-31T06:52:00.000Z"><a href="/2010/07/30/arcgis-temp-user-directory/">Jul 30 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/07/30/arcgis-temp-user-directory/">ArcGIS temp user directory</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Running some intersects on contours and a fishnet on our production GIS server today I apparently gobbled up 10gb of temp space on the D drive - which just happened to be all that was left :-0&nbsp; This was solved by creating a user environmental variable on the box called Arctmpdir and pointing it to somewhere with more available space (X:\workspace).</p>
<p><a href="http://resources.arcgis.com/content/kbase?fa=articleShow&amp;d=29559" target="_blank" rel="external">Here’s an ESRI KB stub.
</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-06-30T02:33:00.000Z"><a href="/2010/06/29/python-address-validation/">Jun 29 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/06/29/python-address-validation/">Python address validation</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Found an address range verification script yesterday afternoon that proved very easy to adapt and run.  I customized it to strip out extraneous fields and ran it on each city’s roads data.  (This I created from simple select by locations using city bounds.)</p>
<p>The tool generates three feature classes - parity, range and overlaps.&nbsp; I’m not sure the difference between the parity and range feature classes, and indeed sometimes the same road segment appears in both, however, the errors are valid.&nbsp; The roads_overlaps is usually two or more segments with overlapping address ranges.</p>
<p><a href="http://blog.guerrillagis.net/wp-content/uploads/2010/06/test.PNG" target="_blank" rel="external"><img src="/images/a1d801cf762a09ec06df0f5d7413b1cd01629f61.PNG" alt="" title="test"></a></p>
<p><strong>Sample of the parity table.</strong></p>
<table style="border-collapse:collapse;table-layout:fixed;width:490px;" border="1" cellspacing="0" cellpadding="0"><br><col style="width:128pt;" width="170"> <col style="width:48pt;" span="5" width="64"><br><tbody><br><tr class="xl63380" style="height:15pt;"><br><td class="xl63380" style="height:15pt;width:128pt;" width="170" height="20"><strong>FULL   NAME #</strong></td><br><td class="xl63380" style="width:48pt;" width="64"><strong>LEFT ADD </strong><span style="display:none;">LOW</span></td><br><td class="xl63380" style="width:48pt;" width="64"><strong>LEFT ADD </strong><span style="display:none;">HIGH</span></td><br><td class="xl63380" style="width:48pt;" width="64"><strong>RIGHT AD</strong><span style="display:none;">D LOW</span></td><br><td class="xl63380" style="width:96pt;" colspan="2" width="128"><strong>RIGHT ADD HIGH</strong></td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">ALANNA CT</td><br><td align="right">251</td><br><td align="right">260</td><br><td align="right">250</td><br><td align="right">262</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">ASHBURN WAY</td><br><td align="right">1094</td><br><td align="right">1198</td><br><td align="right">1096</td><br><td align="right">1199</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">AUDRY DR</td><br><td align="right">1599</td><br><td align="right">1636</td><br><td align="right">1598</td><br><td align="right">1635</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">E HALL LN</td><br><td align="right">1352</td><br><td align="right">1383</td><br><td align="right">1351</td><br><td align="right">1382</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">E LITTLE DOGGIE DRAW</td><br><td align="right">2080</td><br><td align="right">2199</td><br><td align="right">2081</td><br><td align="right">2198</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">E ROAD 2 SOUTH</td><br><td align="right">1300</td><br><td align="right">1448</td><br><td align="right">1300</td><br><td align="right">1449</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">KACHINA</td><br><td align="right">2200</td><br><td align="right">2399</td><br><td align="right">2201</td><br><td align="right">2399</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">N JAMES DR</td><br><td align="right">900</td><br><td align="right">954</td><br><td align="right">900</td><br><td align="right">953</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">N KIMBERLY LN</td><br><td align="right">3300</td><br><td align="right">3499</td><br><td align="right">3301</td><br><td align="right">3499</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">N MARICOPA ST</td><br><td align="right">2770</td><br><td align="right">2999</td><br><td align="right">2769</td><br><td align="right">2999</td><br><td>&nbsp;</td><br></tr><br><tr style="height:15pt;"><br><td style="height:15pt;" height="20">W WILL DR</td><br><td align="right">101</td><br><td align="right">236</td><br><td align="right">100</td><br><td align="right">235</td><br><td><br><br>&nbsp;<br><br></td><br></tr><br><!--[if supportMisalignedColumns]--><br><tr style="display:none;"><br><td style="width:128pt;" width="170">&nbsp;</td><br><td style="width:48pt;" width="64">&nbsp;</td><br><td style="width:48pt;" width="64">&nbsp;</td><br><td style="width:48pt;" width="64">&nbsp;</td><br><td style="width:48pt;" width="64">&nbsp;</td><br><td style="width:48pt;" width="64">&nbsp;</td><br></tr><br><!--[endif]--><br></tbody><br></table>

<p>&nbsp;</p>
<p>Per a co-worker I put Camp Verde, Cottonwood, Clarkdale and Sedona into a zip file and put it on the fromYav directory under the cities FTP directory.  I did the same for PV, Chino, Prescott and Dewey Humboldt.</p>
<p>The Python script takes a geodatabase with a roads feature class in it.&nbsp; It is set up to work with our schema e.g. address range field names, deletion of extraneous fields etc.&nbsp; I saved a version of it on our prod GIS server and included a copy of it here.<a href="http://blog.guerrillagis.net/wp-content/uploads/2010/06/Find_Address_Range_Overlaps.zip" target="_blank" rel="external">Find_Address_Range_Overlaps</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-06-29T03:07:00.000Z"><a href="/2010/06/28/building-contours/">Jun 28 2010</a></time>
      
      
  
    <h1 class="title"><a href="/2010/06/28/building-contours/">Building contours</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Building contours has taken me (like most things) far longer than I would have anticipated.  As I should have come to realize by now, ArcGIS does not support the vast majority of it’s claims of functionality.  It all started when I tried to mosaic the NED tiffs downloaded from the USDA Data gateway.  NED by the way is the National Elevation Dataset and is a cleaned up version of the DEM to support hydrologic modeling (the older DEMs were found to have little glitches/noData here and there and so were cleaned up).</p>
<p><strong>SCROLL DOWN IF YOU DON’T CARE ABOUT THE DETAILS…</strong></p>
<p>At any rate, the mosaicking process was resulting in a 40m shift (approx 3.5 cells) each time.  I tried a number of workarounds all resulting in the same problem.  I finally ended up using good ol’ grid to mosaic the images but had to convert the tiffs to grids first.</p>
<p>I then had a 10m mosaic for the county but in floating point and a z-value in meters and in NAD83 UTM Zone 12.</p>
<p>A co-worker and I converted to integer and z-values in feet with no grief but then when reprojecting discovered a little problem with the nearest neighbor resampling algorithm.  It took me running a hilshade to find it but the reproject effectively generated ~50 mile grid cells on the raster, making the hillshade look horrible and messing up the source NED.  I ran the reproject again using the bilinear resample method and voila, we got a clean version of the source data.</p>
<p>The next step was to create contours.  While trying to run the contour tool on the entire dataset I experienced an ArcMap shutdown at about 50% each time claiming problems with memory allocation (fair enough - it is a 1.5gb raster).  I tried it on our 64bit server hoping that the 64-bit memory allocation options would solve my problems but that didn’t work.  At this point I ran a few tests and as an aside, discovered that I didn’t really like the way the contours were turning out.  Ran a few more tests and discovered that running the focal mean tool in the SAnalyst toolbox (with a circle method and a 3-cell limit) and then running contours resulted in, as the kb stub assured me, less accurate but much better looking contours.  The tradeoff was not even close and so decided to run the focal mean on the NED mosaic.</p>
<p>Now how to generate contours for the county without quartering up the raster and getting slices in the data?  By setting the interval to 100ft and changing the base contour from 0 to 20,40,60,80 I was able to generate 5 contour FCs that could be merged together.  One of my goals in this whole project was to improve the speed of the contour layer in ArcMap and so wanted to experiment with generalization and smoothing to cut down extraneous vertices in the contours.  This led me to run a 1ft min. allow. offset generalization on the contours, improving their appearance even more and cutting down the vertex counts.</p>
<p>I tried selecting each FC and running the generalization in editing mode on our 64bit server and for even more fun I created 5 instances of ArcMap to see what the server was made of.  I think the box is solid but ArcMap couldn’t handle the features. (see image)</p>
<p><img src="/images/d1878a19cfb00c914689c7cb82c268fd8a02f170.png" alt=""></p>
<p>I became suspicious of the individual features in the FCs at this point and so ran a repair geometry for fun.  Sure enough, I repaired roughly 10 features per features class with self-intersections.</p>
<p>I then moved on to one ArcMap instance and subsets of the contours - 5000 features per generalization seemed to work but failed a few times so I’m thinking the threshold must be a total vertex count?</p>
<p>After 10+ ArcMap crashes throughout the generalization process, I finally had the 5 feature classes generalized and ready to merge into one.</p>
<p><span style="font-size: large;"><strong>Here’s the breakdown:</strong></span></p>
<p>Old YC 20ft contours - notice the gridding effect from reprojecting the DEM using the nearest neighbor resampling.</p>
<p><img src="/images/f6bbe3bbce9fc32f6353463994e91eb9f44b340e.png" alt=""></p>
<p>New YC 20 Ft. Contours</p>
<p><img src="/images/1362fe8e5423a19b46be9c8489c3dfaa477e562f.png" alt=""></p>
<p>Old and New</p>
<p><img src="/images/a09bbf30db749d920e70dc49c2f14b70e38cf7ed.png" alt=""></p>
<p>And the size comparison - which should be a direct corollary to ArcMap performance.</p>
<p><img src="/images/3591074ea2b0d05e9fe9e72d54c7315ac9531d02.PNG" alt=""></p>
<p><img src="/images/07b7ac8692e91d438b4b4dcb7aa194b7922254cb.PNG" alt=""></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
    <a href="/categories/General-GIS-Warfare/page/7/" class="alignleft prev">Prev</a>
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:sainsb.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/ArcGIS-Server/">ArcGIS Server</a><small>32</small></li>
  
    <li><a href="/categories/C/">C#</a><small>2</small></li>
  
    <li><a href="/categories/CNET/">C#.NET</a><small>39</small></li>
  
    <li><a href="/categories/ArcGIS-Server/CNET/">C#.NET</a><small>5</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/">General GIS Warfare</a><small>80</small></li>
  
    <li><a href="/categories/ArcGIS-Server/General-GIS-Warfare/">General GIS Warfare</a><small>4</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/">General GIS Warfare</a><small>10</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/Hardware/">Hardware</a><small>1</small></li>
  
    <li><a href="/categories/Hardware/">Hardware</a><small>6</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/Oracle/">Oracle</a><small>2</small></li>
  
    <li><a href="/categories/Oracle/">Oracle</a><small>12</small></li>
  
    <li><a href="/categories/ArcGIS-Server/Python/">Python</a><small>1</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/Python/">Python</a><small>3</small></li>
  
    <li><a href="/categories/CNET/Python/">Python</a><small>2</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/Python/">Python</a><small>2</small></li>
  
    <li><a href="/categories/Python/">Python</a><small>17</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/R/">R</a><small>1</small></li>
  
    <li><a href="/categories/CNET/Python/R/">R</a><small>1</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/R/">R</a><small>1</small></li>
  
    <li><a href="/categories/R/">R</a><small>7</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/RegEx/">RegEx</a><small>2</small></li>
  
    <li><a href="/categories/RegEx/">RegEx</a><small>3</small></li>
  
    <li><a href="/categories/CNET/RegEx/">RegEx</a><small>1</small></li>
  
    <li><a href="/categories/Snippets++/">Snippets++</a><small>21</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/R/Snippets++/">Snippets++</a><small>1</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/Snippets++/">Snippets++</a><small>2</small></li>
  
    <li><a href="/categories/CNET/Snippets++/">Snippets++</a><small>7</small></li>
  
    <li><a href="/categories/CNET/Python/Snippets++/">Snippets++</a><small>1</small></li>
  
    <li><a href="/categories/CNET/Python/R/Snippets++/">Snippets++</a><small>1</small></li>
  
    <li><a href="/categories/R/Snippets++/">Snippets++</a><small>3</small></li>
  
    <li><a href="/categories/Python/Snippets++/">Snippets++</a><small>3</small></li>
  
    <li><a href="/categories/ArcGIS-Server/Snippets++/">Snippets++</a><small>1</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/Snippets++/">Snippets++</a><small>2</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/Python/Snippets++/">Snippets++</a><small>1</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/Python/Snippets++/">Snippets++</a><small>2</small></li>
  
    <li><a href="/categories/Uncategorized/">Uncategorized</a><small>25</small></li>
  
    <li><a href="/categories/Snippets++/Uncategorized/">Uncategorized</a><small>1</small></li>
  
    <li><a href="/categories/CNET/Uncategorized/">Uncategorized</a><small>1</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/Uncategorized/">Uncategorized</a><small>1</small></li>
  
    <li><a href="/categories/Web-Hackery/">Web Hackery</a><small>5</small></li>
  
    <li><a href="/categories/ArcGIS-Server/WebHackery/">WebHackery</a><small>4</small></li>
  
    <li><a href="/categories/CNET/General-GIS-Warfare/WebHackery/">WebHackery</a><small>2</small></li>
  
    <li><a href="/categories/Snippets++/WebHackery/">WebHackery</a><small>2</small></li>
  
    <li><a href="/categories/CNET/Uncategorized/WebHackery/">WebHackery</a><small>1</small></li>
  
    <li><a href="/categories/WebHackery/">WebHackery</a><small>12</small></li>
  
    <li><a href="/categories/CNET/WebHackery/">WebHackery</a><small>3</small></li>
  
    <li><a href="/categories/General-GIS-Warfare/WebHackery/">WebHackery</a><small>4</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2014/06/12/python-field-calculate-sequence/">Python field calculate sequence</a>
      </li>
    
      <li>
        <a href="/2014/05/19/erd-relationship-symbols/">ERD Relationship Symbols</a>
      </li>
    
      <li>
        <a href="/2014/05/08/positive-lookahead-assertion/">Positive lookahead assertion</a>
      </li>
    
      <li>
        <a href="/2014/04/22/python-iterate-files-weak-sauce/">Python iterate files (weak sauce)</a>
      </li>
    
      <li>
        <a href="/2014/04/21/python-cheats/">Python cheats</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/arcgis/">arcgis</a><small>1</small></li>
  
    <li><a href="/tags/arcpy/">arcpy</a><small>1</small></li>
  
    <li><a href="/tags/python/">python</a><small>1</small></li>
  
    <li><a href="/tags/regex/">regex</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Che Geovara
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>